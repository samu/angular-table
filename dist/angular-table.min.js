// author:   Samuel Mueller
// version: 1.0.4
// license:  MIT
// homepage: http://github.com/samu/angular-table
(function(){var d,h,c,g,b,j,k,l,a,e,i={}.hasOwnProperty,f=function(p,n){for(var m in n){if(i.call(n,m)){p[m]=n[m]}}function o(){this.constructor=p}o.prototype=n.prototype;p.prototype=new o();p.__super__=n.prototype;return p};angular.module("angular-table",[]);d=(function(){function m(n,o){this.attribute=n.attribute;this.title=n.title;this.sortable=n.sortable;this.sortableElement=n.sortableElement;this.width=n.width;this.initialSorting=n.initialSorting;if(o){this.customContent=o.customContent;this.attributes=o.attributes}}m.prototype.createElement=function(){var n;return n=angular.element(document.createElement("th"))};m.prototype.renderTitle=function(n){return n.html(this.customContent||this.title)};m.prototype.renderAttributes=function(p){var q,s,o,r,n;if(this.customContent){r=this.attributes;n=[];for(s=0,o=r.length;s<o;s++){q=r[s];n.push(p.attr(q.name,q.value))}return n}};m.prototype.renderSorting=function(o){var p;var n;if(this.sortableElement){n=this.sortableElement}else{if(this.sortable){n=this.attribute}}if(this.sortableElement||this.sortable){o.attr("ng-click","predicate = '"+n+"'; descending = !descending;");p=angular.element("<i style='margin-left: 10px;'></i>");p.attr("ng-class","getSortIcon('"+n+"', predicate)");return o.append(p)}};m.prototype.renderWidth=function(n){return n.attr("width",this.width)};m.prototype.renderHtml=function(){var n;n=this.createElement();this.renderTitle(n);this.renderAttributes(n);this.renderSorting(n);this.renderWidth(n);return n};return m})();a=(function(){function m(n){this.configObjectName=n;this.itemsPerPage=""+this.configObjectName+".itemsPerPage";this.sortContext=""+this.configObjectName+".sortContext";this.fillLastPage=""+this.configObjectName+".fillLastPage";this.maxPages=""+this.configObjectName+".maxPages";this.currentPage=""+this.configObjectName+".currentPage";this.orderBy=""+this.configObjectName+".orderBy"}return m})();g=(function(){function m(p,o,n){this.scope=p;this.configurationVariableNames=o;this.listName=n}m.prototype.getList=function(){return this.scope.$eval(this.listName)};m.prototype.getItemsPerPage=function(){return this.scope.$eval(this.configurationVariableNames.itemsPerPage)||10};m.prototype.getCurrentPage=function(){return this.scope.$eval(this.configurationVariableNames.currentPage)||0};m.prototype.getMaxPages=function(){return this.scope.$eval(this.configurationVariableNames.maxPages)||void 0};m.prototype.getSortContext=function(){return this.scope.$eval(this.configurationVariableNames.sortContext)||"global"};m.prototype.setCurrentPage=function(n){return this.scope.$eval(""+this.configurationVariableNames.currentPage+"="+n)};m.prototype.getOrderBy=function(){return this.scope.$eval(this.configurationVariableNames.orderBy)||"orderBy"};return m})();l=(function(){function m(o,n){this.tableElement=o;this.attributes=n;this.id=this.attributes.id;this.config=this.attributes.atConfig;this.paginated=this.attributes.atPaginated!=null;this.list=this.attributes.atList;this.createColumnConfigurations()}m.prototype.capitaliseFirstLetter=function(n){if(n){return n.charAt(0).toUpperCase()+n.slice(1)}else{return""}};m.prototype.extractWidth=function(n){var o;o=/([0-9]+px)/i.exec(n);if(o){return o[0]}else{return""}};m.prototype.isSortable=function(n){var o;o=/(sortable)/i.exec(n);if(o){return true}else{return false}};m.prototype.getInitialSorting=function(o){var n;n=o.attr("at-initial-sorting");if(n){if(n==="asc"||n==="desc"){return n}throw"Invalid value for initial-sorting: "+n+". Allowed values are 'asc' or 'desc'."}return void 0};m.prototype.collectHeaderMarkup=function(q){var o,p,t,s,n,r;o={};t=q.find("tr");r=t.find("th");for(s=0,n=r.length;s<n;s++){p=r[s];p=angular.element(p);o[p.attr("at-attribute")]={customContent:p.html(),attributes:p[0].attributes}}return o};m.prototype.collectBodyMarkup=function(y){var o,t,v,s,u,p,x,n,q,w,r;t=[];r=y.find("td");for(q=0,w=r.length;q<w;q++){p=r[q];p=angular.element(p);o=p.attr("at-attribute");x=p.attr("at-title")||this.capitaliseFirstLetter(p.attr("at-attribute"));s=p.attr("at-sortable")!==void 0||this.isSortable(p.attr("class"));u=p.attr("at-sortable");n=this.extractWidth(p.attr("class"));v=this.getInitialSorting(p);t.push({attribute:o,title:x,sortable:s,sortableElement:u,width:n,initialSorting:v})}return t};m.prototype.createColumnConfigurations=function(){var n,p,q,r,o;p=this.collectHeaderMarkup(this.tableElement);n=this.collectBodyMarkup(this.tableElement);this.columnConfigurations=[];for(r=0,o=n.length;r<o;r++){q=n[r];this.columnConfigurations.push(new d(q,p[q.attribute]))}};return m})();b=(function(){function m(){}m.prototype.setupTr=function(o,q){var n,p;n=o.find("tbody");p=n.find("tr");p.attr("ng-repeat",q);return n};return m})();j=(function(n){f(m,n);function m(o,p){this.list=p;this.repeatString="item in "+this.list+" | orderBy:predicate:descending"}m.prototype.compile=function(q,p,o){return this.setupTr(q,this.repeatString)};m.prototype.link=function(){};return m})(b);c=(function(m){f(n,m);function n(o){this.configurationVariableNames=o;this.repeatString="item in sortedAndPaginatedList"}n.prototype.compile=function(q){var s,p,v,u,r,t,o;p=this.setupTr(q,this.repeatString);r=q.find("td");u="";for(t=0,o=r.length;t<o;t++){v=r[t];u+="<td>&nbsp;</td>"}s=angular.element(document.createElement("tr"));s.attr("ng-show",this.configurationVariableNames.fillLastPage);s.html(u);s.attr("ng-repeat","item in fillerArray");p.append(s)};n.prototype.link=function(t,u,v,p){var q,s,x,o,r;q=this.configurationVariableNames;r=new g(t,q,v.atList);x=function(C,B,y,E,F,G,A,D){var w,z;if(C){z=C;w=y*B-C.length;if(F==="global"){z=D(E)(z,G,A);z=D("limitTo")(z,w);z=D("limitTo")(z,y)}else{z=D("limitTo")(z,w);z=D("limitTo")(z,y);z=D(E)(z,G,A)}return z}else{return[]}};s=function(H,G,D,w){var K,I,J,E,C,F,B,y,A,z;w=parseInt(w);if(H.length<=0){A=[];for(J=E=0,F=w-1;0<=F?E<=F:E>=F;J=0<=F?++E:--E){A.push(J)}return A}else{if(G===D-1){I=H.length%w;if(I!==0){K=w-I-1;z=[];for(J=C=B=H.length,y=H.length+K;B<=y?C<=y:C>=y;J=B<=y?++C:--C){z.push(J)}return z}else{return[]}}}};o=function(){var w;t.sortedAndPaginatedList=x(r.getList(),r.getCurrentPage(),r.getItemsPerPage(),r.getOrderBy(),r.getSortContext(),t.predicate,t.descending,p);w=Math.ceil(r.getList().length/r.getItemsPerPage());return t.fillerArray=s(r.getList(),r.getCurrentPage(),w,r.getItemsPerPage())};t.$watch(q.currentPage,function(){return o()});t.$watch(q.itemsPerPage,function(){return o()});t.$watch(q.sortContext,function(){return o()});t.$watchCollection(v.atList,function(){return o()});t.$watch(""+v.atList+".length",function(){t.numberOfPages=Math.ceil(r.getList().length/r.getItemsPerPage());return o()});t.$watch("predicate",function(){return o()});return t.$watch("descending",function(){return o()})};return n})(b);k=(function(){function m(o,p,n){this.element=o;this.tableConfiguration=p;this.configurationVariableNames=n}m.prototype.constructHeader=function(){var o,r,q,n,p;r=angular.element(document.createElement("tr"));p=this.tableConfiguration.columnConfigurations;for(q=0,n=p.length;q<n;q++){o=p[q];r.append(o.renderHtml())}return r};m.prototype.setupHeader=function(){var p,o,n;o=this.element.find("thead");if(o){p=this.constructHeader();n=angular.element(o).find("tr");n.remove();return o.append(p)}};m.prototype.getSetup=function(){if(this.tableConfiguration.paginated){return new c(this.configurationVariableNames)}else{return new j(this.configurationVariableNames,this.tableConfiguration.list)}};m.prototype.compile=function(){this.setupHeader();this.setup=this.getSetup();return this.setup.compile(this.element)};m.prototype.setupInitialSorting=function(p){var s,r,o,q,n;q=this.tableConfiguration.columnConfigurations;n=[];for(r=0,o=q.length;r<o;r++){s=q[r];if(s.initialSorting){if(!s.attribute&&!s.sortableElement){throw"initial-sorting specified without attribute."}if(s.sortableElement){p.predicate=s.sortableElement}else{p.predicate=s.attribute}n.push(p.descending=s.initialSorting==="desc")}else{n.push(void 0)}}return n};m.prototype.post=function(p,o,n,q){this.setupInitialSorting(p);if(!p.getSortIcon){p.getSortIcon=function(r,s){if(r!==p.predicate){return"glyphicon glyphicon-minus"}if(p.descending){return"glyphicon glyphicon-chevron-down"}else{return"glyphicon glyphicon-chevron-up"}}}return this.setup.link(p,o,n,q)};return m})();h=(function(){function m(p,o,q,n){this.lowerBound=p!=null?p:0;this.upperBound=o!=null?o:1;if(q==null){q=0}this.length=n!=null?n:1;if(this.length>(this.upperBound-this.lowerBound)){throw"sequence is too long"}this.data=this.generate(q)}m.prototype.generate=function(r){var n,q,p,o;if(r>(this.upperBound-this.length)){r=this.upperBound-this.length}else{if(r<this.lowerBound){r=this.lowerBound}}o=[];for(n=q=r,p=parseInt(r)+parseInt(this.length)-1;r<=p?q<=p:q>=p;n=r<=p?++q:--q){o.push(n)}return o};m.prototype.resetParameters=function(p,o,n){this.lowerBound=p;this.upperBound=o;this.length=n;if(this.length>(this.upperBound-this.lowerBound)){throw"sequence is too long"}return this.data=this.generate(this.data[0])};m.prototype.relocate=function(o){var n;n=this.data[0]+o;return this.data=this.generate(n,n+this.length)};m.prototype.realignGreedy=function(o){var n;if(o<this.data[0]){n=o;return this.data=this.generate(n)}else{if(o>this.data[this.length-1]){n=o-(this.length-1);return this.data=this.generate(n)}}};m.prototype.realignGenerous=function(n){};return m})();e="<div style='margin: 0px;'> <ul class='pagination'> <li ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='stepPage(-numberOfPages)'>First</a> </li> <li ng-show='showSectioning()' ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='jumpBack()'>&laquo;</a> </li> <li ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='stepPage(-1)'>&lsaquo;</a> </li> <li ng-class='{active: getCurrentPage() == page}' ng-repeat='page in pageSequence.data'> <a href='' ng-click='goToPage(page)'>{{page + 1}}</a> </li> <li ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='stepPage(1)'>&rsaquo;</a> </li> <li ng-show='showSectioning()' ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='jumpAhead()'>&raquo;</a> </li> <li ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='stepPage(numberOfPages)'>Last</a> </li> </ul> </div>";angular.module("angular-table").directive("atTable",["$filter",function(m){return{restrict:"AC",scope:true,compile:function(r,p,o){var q,s,n;n=new l(r,p);q=new a(p.atConfig);s=new k(r,n,q);s.compile();return{post:function(v,u,t){return s.post(v,u,t,m)}}}}}]);angular.module("angular-table").directive("atPagination",[function(){return{restrict:"E",scope:true,replace:true,template:e,link:function(r,s,u){var o,q,m,t,n,p;o=new a(u.atConfig);p=new g(r,o,u.atList);m=function(x,w,v){x=Math.max(w,x);return Math.min(v,x)};q=function(){return r.numberOfPages};t=function(v){return r.numberOfPages=v};n=function(w){var v,x;if(p.getList()){if(p.getList().length>0){v=Math.ceil(p.getList().length/p.getItemsPerPage());t(v);if(r.showSectioning()){x=p.getMaxPages()}else{x=v}r.pageSequence.resetParameters(0,v,x);p.setCurrentPage(m(p.getCurrentPage(),0,q()-1));return r.pageSequence.realignGreedy(p.getCurrentPage())}else{t(1);r.pageSequence.resetParameters(0,1,1);p.setCurrentPage(0);return r.pageSequence.realignGreedy(0)}}};r.showSectioning=function(){return p.getMaxPages()&&q()>p.getMaxPages()};r.getCurrentPage=function(){return p.getCurrentPage()};r.stepPage=function(v){v=parseInt(v);p.setCurrentPage(m(p.getCurrentPage()+v,0,q()-1));return r.pageSequence.realignGreedy(p.getCurrentPage())};r.goToPage=function(v){return p.setCurrentPage(v)};r.jumpBack=function(){return r.stepPage(-p.getMaxPages())};r.jumpAhead=function(){return r.stepPage(p.getMaxPages())};r.pageSequence=new h();r.$watch(o.itemsPerPage,function(){return n()});r.$watch(o.maxPages,function(){return n()});r.$watch(u.atList,function(){return n()});r.$watch(""+u.atList+".length",function(){return n()});return n()}}}]);angular.module("angular-table").directive("atImplicit",[function(){return{restrict:"AC",compile:function(o,n,m){var p;p=o.attr("at-attribute");if(!p){throw"at-implicit specified without at-attribute: "+(o.html())}return o.append("{{item."+p+"}}")}}}])}).call(this);